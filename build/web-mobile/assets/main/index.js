System.register("chunks:///main.js",["./rollupPluginModLoBabelHelpers-a541109d.js","cc"],(function(){var e,t,n,i,r,a,o,s,c,l,u,p,h,d,f,g,m,v,b,y,S,C,w,B,k,L,U,I,x,M,N,F,R,T,_,z,A,q,P,E,D;return{setters:[function(l){e=l.a,t=l._,n=l.b,i=l.c,r=l.d,a=l.e,o=l.f,s=l.g,c=l.h},function(e){l=e.cclegacy,u=e._decorator,p=e.view,h=e.director,d=e.Component,f=e.AudioSource,g=e.log,m=e.UITransform,v=e.find,b=e.instantiate,y=e.Label,S=e.sys,C=e.Node,w=e.Vec3,B=e.tween,k=e.v3,L=e.resources,U=e.SpriteFrame,I=e.Sprite,x=e.SpriteAtlas,M=e.Enum,N=e.CCInteger,F=e.NodeEventType,R=e.UIRenderer,T=e.ImageAsset,_=e.Texture2D,z=e.Color,A=e.Graphics,q=e.EditBox,P=e.ProgressBar,E=e.Input,D=e.CCFloat}],execute:function(){var O;l._RF.push({},"e093erCblZJ1Y+p07Wt974S","adaptiveCanvas",void 0);var H,W,Y,X,G,V,j,J=u.ccclass;u.property,J("AdaptiveCanvas")(O=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.start=function(){this.adjustResolution()},i.adjustResolution=function(){var e,t=p.getDesignResolutionSize(),n=p.getFrameSize(),i=t.width/t.height,r=n.width/n.height;r>i?p.setDesignResolutionSize(t.width,t.width/r,2):p.setDesignResolutionSize(t.height*r,t.height,2),null==(e=h.getScene())||e.update()},n}(d));l._RF.pop(),l._RF.push({},"e84acnjl9VB773GX7nViIt0","audioManager",void 0);var Z,K=u.ccclass,Q=u.property;H=K("AudioManager"),W=Q({type:f}),H(((j=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bgmAudioSource",G,i(e)),n(e,"isMuted",V,i(e)),e}e(r,t);var a=r.prototype;return a.onLoad=function(){r._instance?this.destroy():(r._instance=this,h.addPersistRootNode(this.node),this.bgmAudioSource.play(),this.bgmAudioSource.loop=!0,this.bgmAudioSource.volume=2,g("AudioManager is initialized and playing music."))},r.getInstance=function(){return r._instance},a.playBackgroundMusic=function(e){this.bgmAudioSource.stop(),this.bgmAudioSource.clip=e,this.bgmAudioSource.play()},a.setMute=function(){this.isMuted=!this.isMuted,this.isMuted?this.bgmAudioSource.volume=0:this.bgmAudioSource.volume=2},r}(d))._instance=null,G=t((X=j).prototype,"bgmAudioSource",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(X.prototype,"isMuted",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Y=X));l._RF.pop(),l._RF.push({},"6c05fDEge5JSIc4q6YAExU6","autoScaleImage",void 0);var $=u.ccclass;u.property,$("AutoScaleImages")(Z=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.start=function(){this.resizeAllImages(this.node)},i.resizeAllImages=function(e){var t=this,n=p.getDesignResolutionSize(),i=p.getFrameSize(),r=Math.min(i.width/n.width,i.height/n.height);e.children.forEach((function(e){var n=e.getComponent(m);n&&(n.width*=r,n.height*=r),e.children.length>0&&t.resizeAllImages(e)}))},n}(d));l._RF.pop(),l._RF.push({},"23eafoQ2X9IdIEqFsEuDvzt","loadData",void 0);var ee="Steal Success!",te="Steal Failed!",ne="query_id=AAFNCHk7AAAAAE0IeTtP7RMw&user=%7B%22id%22%3A997787731%2C%22first_name%22%3A%22Franklin%22%2C%22last_name%22%3A%22Zelo%22%2C%22username%22%3A%22franklinEight%22%2C%22language_code%22%3A%22zh-hans%22%2C%22allows_write_to_pm%22%3Atrue%2C%22photo_url%22%3A%22https%3A%5C%2F%5C%2Ft.me%5C%2Fi%5C%2Fuserpic%5C%2F320%5C%2FVPWnV7PoxyMCwkPeMUnbj5ISWwjyAf0W0d1i8cKqjGk.svg%22%7D&auth_date=1734449112&signature=opXIYnBU_2ZOnJeRIpEqjwgUFzMpYGv5b-vDK2u3YE7ojcnhPvAzQ5UtEluRwTuEPflKqC8bcTnqnJpWc2KCAg&hash=0c5a480bdf6dc2a33c0f8d7d94779ca91442078ee409ed5f2bcb37e531489785",ie=[{createdAt:1728811268236,updatedAt:1728811268236,id:1,userId:5418325938,skillType:"SOIL",ratio:10,upNum:1,cost:2e3},{createdAt:null,updatedAt:null,id:null,userId:5418325938,skillType:"IRRIGATE",ratio:0,upNum:0,cost:1e3},{createdAt:null,updatedAt:null,id:null,userId:5418325938,skillType:"PLANT",ratio:0,upNum:0,cost:1e3},{createdAt:null,updatedAt:null,id:null,userId:5418325938,skillType:"GROW",ratio:0,upNum:0,cost:1e3},{createdAt:null,updatedAt:null,id:null,userId:5418325938,skillType:"MANURE",ratio:0,upNum:0,cost:1e3},{createdAt:null,updatedAt:null,id:null,userId:5418325938,skillType:"DITCH",ratio:0,upNum:0,cost:1e3}];l._RF.pop(),l._RF.push({},"c04deCVHahCSodX2GwQtNU3","http",void 0);var re,ae,oe,se,ce,le,ue,pe,he="",de="https://bf.tomocloud.com";function fe(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=r(a().mark((function e(t,n,i){var r,s,c,l,u,p,h,d,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),he||(he=ne),s=(r=n).method,c=void 0===s?"GET":s,l=r.headers,u=void 0===l?{"Content-Type":"application/json",Accept:"*/*","Accept-Encoding":"gzip, deflate, br",token:he}:l,p=r.body,h=void 0===p?null:p,i&&(t+=me(i)),e.prev=4,e.next=7,fetch(""+de+t,{method:c,headers:o({},u,{token:he}),redirect:"follow",credentials:"same-origin",body:h?JSON.stringify(h):null});case 7:return d=e.sent,e.next=10,d.json();case 10:return f=e.sent,e.abrupt("return",{status:d.status,data:f,ok:d.ok});case 14:throw e.prev=14,e.t0=e.catch(4),new Error("HTTP request failed: "+e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function me(e){return e?"?"+Object.entries(e).map((function(e){var t=e[0],n=e[1];return encodeURIComponent(t)+"="+encodeURIComponent(null!=n?n:"")})).join("&"):""}l._RF.pop(),l._RF.push({},"626b9C8eU5D16xbVvv6T7hQ","buyCoins",void 0);var ve,be=u.ccclass,ye=u.property;be("BuyCoins")(((pe=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"coinList",oe,i(e)),n(e,"UCoinList",se,i(e)),n(e,"UCoinSection",ce,i(e)),n(e,"coinSpacingY",le,i(e)),n(e,"coinSpacingX",ue,i(e)),e}e(o,t),o.getInstance=function(){return o._instance};var s=o.prototype;return s.onLoad=function(){o._instance=this,this.coinSpacingY=40,this.UCoinList=v("popBox/Canvas/BuyCoins/List"),this.UCoinSection=v("popBox/Canvas/BuyCoins/Section"),this.buyCoinsList()},s.createBuyCoinsLayout=function(){var e=this,t=this.UCoinSection.getComponent(m).contentSize.height,n=this.UCoinSection.getComponent(m).contentSize.width,i=this.UCoinSection.position.x,r=this.UCoinSection.position.y;this.coinList.forEach((function(a,o){var s=r-Math.floor(o/3)*(t+e.coinSpacingY),c=i+o%3*(n+e.coinSpacingX),l=b(e.UCoinSection);e.UCoinList.addChild(l),l.active=!0,l.setPosition(c,s),l.getChildByName("Rebates").getChildByName("Percent").getComponent(y).string=a.discount+"%",l.getChildByName("Coins").getComponent(y).string="x"+a.points,l.getChildByName("Button").coinId=a.id,l.getChildByName("Button").getChildByName("Label").getComponent(y).string="$"+a.price}))},s.buyCoinsList=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/shop/points",{method:"GET"});case 3:(t=e.sent).ok?(this.coinList=t.data.data,this.createBuyCoinsLayout()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.buyCoins=function(){var e=r(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,fe("/api/v1/shop/buy",{method:"POST",body:{id:t.currentTarget.coinId}});case 4:(n=e.sent).ok?S.openURL(n.data.data.url):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),o}(d))._instance=void 0,oe=t((ae=pe).prototype,"coinList",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),se=t(ae.prototype,"UCoinList",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ae.prototype,"UCoinSection",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ae.prototype,"coinSpacingY",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),ue=t(ae.prototype,"coinSpacingX",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),re=ae));function Se(e,t){void 0===t&&(t=!1);var n=Math.floor(e/3600),i=Math.floor(e%3600/60),r="";return n>0&&(r+=t?n+"h ":n+"h"),i>0&&(r+=t?i+"min ":i+"min"),(r+=e%60+"s").trim()}l._RF.pop(),l._RF.push({},"42490AW+UZEmLLJMRco7Epy","utils",void 0),l._RF.pop(),l._RF.push({},"3e9dakXua5OYrmgJ+kfP3s1","seedEffect",void 0);var Ce,we,Be,ke,Le,Ue,Ie,xe,Me,Ne=(0,u.ccclass)("SeedEffect")(ve=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).targetNode=null,e.targetData=void 0,e}e(n,t);var i=n.prototype;return i.setTargetNode=function(e,t){this.targetNode=e,this.targetData=t,this.targetNode.on(C.EventType.MOUSE_DOWN,this.onMouseDown,this),this.targetNode.on(C.EventType.TOUCH_START,this.onTouchStart,this)},i.onTouchStart=function(){this.emitEvent()},i.onMouseDown=function(){this.emitEvent()},i.emitEvent=function(){var e=kn.getInstance();if(e){var t=Lt.getInstance();e.setTargetSeed(this.targetData),t.farmlandPlant()}},n}(d))||ve;l._RF.pop(),l._RF.push({},"1c5b2xcpldDM4Jjaby1WYAJ","globalData",void 0);var Fe,Re,Te,_e,ze,Ae,qe,Pe,Ee=u.ccclass,De=u.property,Oe=Ee("GlobalData")(((Me=function(t){function r(){var e;return e=t.call(this)||this,n(e,"userInfo",Be,i(e)),n(e,"isLogin",ke,i(e)),n(e,"isStolen",Le,i(e)),n(e,"stolenId",Ue,i(e)),n(e,"UMessage",Ie,i(e)),n(e,"token",xe,i(e)),e}e(r,t);var a=r.prototype;return a.onLoad=function(){this.UMessage=v("MainCanvas/Message"),this.UMessage.active=!1},r.getInstance=function(){return r.instance||(r.instance=new r),r.instance},a.isStolenUISwitch=function(){var e=v("MainCanvas/TopContent/Income"),t=v("MainCanvas/TopContent/Slider"),n=v("MainCanvas/TopContent/Person/Money/PlusCircle"),i=v("MainCanvas/TopContent/Person/Addition/PlusCircle"),r=v("MainCanvas/Footer"),a=v("MainCanvas/FooterStolen");e.active=!1,t.active=!1,n.active=!1,i.active=!1,r.active=!1,a.active=!0},a.isNotStolenUISwitch=function(){var e=v("MainCanvas/TopContent/Income"),t=v("MainCanvas/TopContent/Slider"),n=v("MainCanvas/TopContent/Person/Money/PlusCircle"),i=v("MainCanvas/TopContent/Person/Addition/PlusCircle"),r=v("MainCanvas/Footer"),a=v("MainCanvas/FooterStolen");e.active=!0,t.active=!0,n.active=!0,i.active=!0,r.active=!0,a.active=!1},a.setMessageLabel=function(e,t){void 0===t&&(t=2);var n=v("MainCanvas/Message");n.active=!0,n.getChildByName("Label").getComponent(y).string=e,setTimeout((function(){n.active=!1}),1e3*t)},r}(d)).instance=void 0,Be=t((we=Me).prototype,"userInfo",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(we.prototype,"isLogin",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Le=t(we.prototype,"isStolen",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ue=t(we.prototype,"stolenId",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Ie=t(we.prototype,"UMessage",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(we.prototype,"token",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"7360724156:AAGeBGUrfDuRRYTkL-G4ZWKmi3rIKWH05VU"}}),Ce=we))||Ce;l._RF.pop(),l._RF.push({},"43231LBsQJLjLE5Z4FP5UZg","hoverEffect",void 0);var He,We=u.ccclass,Ye=u.property,Xe=(Fe=We("HoverEffect"),Re=Ye(w),Te=Ye(w),Fe((Ae=t((ze=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).targetNode=null,e.targetData=void 0,e.targetLevel=void 0,n(e,"hasPlayed",Ae,i(e)),n(e,"leftPosition",qe,i(e)),n(e,"rightPosition",Pe,i(e)),e}e(r,t);var a=r.prototype;return a.setTargetNode=function(e,t,n){this.targetNode=e,this.targetData=t,this.targetLevel=n,S.isMobile?(this.targetNode.on(C.EventType.TOUCH_START,this.onTouchStart,this),this.targetNode.on(C.EventType.TOUCH_END,this.onTouchEnd,this)):(this.targetNode.on(C.EventType.MOUSE_DOWN,this.onMouseDown,this),this.targetNode.on(C.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.targetNode.on(C.EventType.MOUSE_LEAVE,this.onMouseLeave,this))},a.onMouseEnter=function(){Oe.getInstance().isStolen||(3===this.targetLevel?this.targetNode.getChildByName("Receivehand").active=!0:this.targetNode.getChildByName("Receivehand").active=!1)},a.onMouseLeave=function(){Oe.getInstance().isStolen||(this.targetNode.getChildByName("Receivehand").active=!1)},a.onMouseDown=function(){var e=Oe.getInstance(),t=Ct.getInstance(),n=kn.getInstance();3===this.targetLevel&&(this.receiveHandAnimation(),this.goldMoveAnimation(),this.playVoice(),e.isStolen?t.stealFarmland(this.targetData.id,this.targetData.plantId):t.harvestFarmland(this.targetData.id)),n&&0===this.targetLevel&&(n.showDialog(null,"Bag"),n.setTargetBlock(this.targetNode.parent,this.targetData))},a.receiveHandAnimation=function(){var e=this;B(this.targetNode.getChildByName("Receivehand")).to(.3,{position:this.leftPosition},{easing:"cubicOut"}).to(.3,{position:this.rightPosition},{easing:"cubicOut"}).start(),setTimeout((function(){e.targetNode.getChildByName("Receivehand").active=!1}),600)},a.goldMoveAnimation=function(){var e=v("MainCanvas/GoldEnd"),t=b(e);t.active=!0,t.setSiblingIndex(this.node.children.length-1),this.node.addChild(t);var n=this.node.getComponent(m).convertToWorldSpaceAR(w.ZERO),i=this.node.getComponent(m).convertToNodeSpaceAR(n);t.setPosition(n);var r=e.getComponent(m).convertToWorldSpaceAR(w.ZERO),a=this.node.getComponent(m).convertToNodeSpaceAR(r),o=k((i.x+a.x)/2,i.y+150,0);B({t:0}).to(1,{t:1},{onUpdate:function(e){var n=e.t,r=(1-n)*(1-n)*i.x+2*(1-n)*n*o.x+n*n*a.x,s=(1-n)*(1-n)*i.y+2*(1-n)*n*o.y+n*n*a.y;t.setPosition(r,s,0)}}).call((function(){t.destroy()})).start()},a.playVoice=function(){var e=this.node.getComponent(f)||this.node.addComponent(f);e.play(),this.scheduleOnce((function(){e.stop()}),2)},a.onTouchStart=function(){var e=Oe.getInstance(),t=Ct.getInstance(),n=kn.getInstance();3===this.targetLevel&&(this.targetNode.getChildByName("Receivehand").active=!0,this.receiveHandAnimation(),this.goldMoveAnimation(),this.playVoice(),e.isStolen?t.stealFarmland(this.targetData.id,this.targetData.plantId):t.harvestFarmland(this.targetData.id)),n&&0===this.targetLevel&&(n.showDialog(null,"Bag"),n.setTargetBlock(this.targetNode.parent,this.targetData))},a.onTouchEnd=function(){Oe.getInstance().isStolen||(this.targetNode.getChildByName("Receivehand").active=!1)},r}(d)).prototype,"hasPlayed",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qe=t(ze.prototype,"leftPosition",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w(0,25.625,0)}}),Pe=t(ze.prototype,"rightPosition",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w(60.297,25.625,0)}}),_e=ze))||_e);l._RF.pop(),l._RF.push({},"8d18bpu6clDEanbB76tCUTF","genPlant",void 0);var Ge,Ve,je,Je,Ze,Ke,Qe,$e,et,tt,nt,it,rt,at,ot,st,ct,lt=u.ccclass,ut=(u.property,lt("GenPlant")(He=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).plantSprite=null,e.plantMarkingSprite=null,e.plantSpritePath=null,e.plantMarkingsPath=null,e.plantLevel=null,e}e(n,t);var i=n.prototype;return i.updatePlantStatus=function(e,t){var n=this;if(null!==e.children&&0!==t.status){if(this.plantSprite=e.getChildByName("Plant"),this.plantSprite.active=!0,this.plantMarkingSprite=e.getChildByName("Countdown").getChildByName("Icon"),this.plantMarkingsPath="",0===t.farmStatus)this.plantSpritePath="awaitingSowing",this.plantLevel=0,e.getChildByName("Countdown").active=!1,e.getChildByName("Plant").getChildByName("Receivehand").active=!1;else{var i=(new Date).getTime(),r=t.seed.plantAt+1e3*t.seed.maturityTime,a=t.seed.plantAt;e.getChildByName("Countdown").active=!0;var o=e.getChildByName("Countdown");if(r-i>0&&i-a>=0)switch(this.startCountdownForLand(e,o,r-i,t),r-i>i-a&&(this.plantLevel=1),r-i<i-a&&(this.plantLevel=2),t.seed.name){case"玉米":case"茄子":this.plantMarkingsPath="tomatoMarkings";break;case"萝卜":this.plantMarkingsPath="carrotMarkings";break;case"西红柿":this.plantMarkingsPath="tomatoMarkings";break;default:this.plantMarkingsPath="carrotMarkings"}else o.hasSchedule=!1;if(r-i<=0&&(this.plantLevel=3,o.active=!1),1===this.plantLevel&&(this.plantSpritePath="sprout"),2===this.plantLevel&&(this.plantSpritePath="carrotLevel2"),3===this.plantLevel)switch(t.seed.name){case"玉米":case"茄子":this.plantSpritePath="eggplantLevel3";break;case"萝卜":this.plantSpritePath="carrotLevel3";break;case"西红柿":this.plantSpritePath="tomatoLevel3";break;default:this.plantSpritePath="carrotLevel3"}}this.plantMarkingsPath&&L.load(this.plantMarkingsPath+"/spriteFrame",U,(function(e,t){e?console.error("Failed to load sprite:",e):n.plantMarkingSprite.getComponent(I).spriteFrame=t}));var s=Oe.getInstance();if(s.isStolen&&3===this.plantLevel&&1===t.stealAvailable&&(e.getChildByName("Plant").getChildByName("Receivehand").active=!0),s.isStolen&&0===t.stealAvailable&&(e.getChildByName("Plant").getChildByName("Receivehand").active=!1),!this.plantSpritePath)Ct.getInstance().updateFarmLand(t.id);L.load(this.plantSpritePath+"/spriteFrame",U,(function(e,i){e?console.error("Failed to load sprite:",e):(n.plantSprite.getComponent(I).spriteFrame=i,0===n.plantLevel&&(n.plantSprite.getComponent(m).width=60,n.plantSprite.getComponent(m).height=70,n.plantSprite.setPosition(0,36,0)),1===n.plantLevel&&(n.plantSprite.getComponent(m).width=60,n.plantSprite.getComponent(m).height=48,n.plantSprite.setPosition(0,30,0)),2===n.plantLevel&&(n.plantSprite.getComponent(m).width=90,n.plantSprite.getComponent(m).height=100,n.plantSprite.setPosition(0,60,0)),3===n.plantLevel&&("carrotLevel3"===n.plantSpritePath?(n.plantSprite.getComponent(m).width=90,n.plantSprite.getComponent(m).height=120,n.plantSprite.setPosition(0,60,0)):(n.plantSprite.getComponent(m).width=160,n.plantSprite.getComponent(m).height=156,n.plantSprite.setPosition(0,80,0))),n.plantSprite.getComponent(Xe)?n.plantSprite.getComponent(Xe).setTargetNode(n.plantSprite,t,n.plantLevel):n.plantSprite.addComponent(Xe).setTargetNode(n.plantSprite,t,n.plantLevel))}))}},i.startCountdownForLand=function(e,t,n,i){var r=this,a=n,o=t.getChildByName("Content").getComponent(y);if(t.active=!0,!t.hasSchedule){this.schedule((function n(){t.hasSchedule=!0,a>0?(a-=1e3,o.string=Se(Math.ceil(a/1e3))):(o.string="",r.unschedule(n),r.updateCountdown(t)),r.updatePlantStatus(e,i)}),1)}},i.updateCountdown=function(e){e.active=!1,e.hasSchedule=!1},i.resetNode=function(e){e.getChildByName("Countdown").hasSchedule=!1},n}(d))||He);l._RF.pop(),l._RF.push({},"d531b+uM+VNwLXm7OSFCSKz","genBlock",void 0);var pt,ht,dt,ft,gt,mt,vt,bt,yt=u.ccclass,St=u.property,Ct=(Ge=yt("GenBlock"),Ve=St(C),je=St(C),Je=St(C),Ze=St(C),Ge(((ct=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"blockContainer",$e,i(e)),n(e,"lockBlock",et,i(e)),n(e,"unlockBlock",tt,i(e)),n(e,"sprite",nt,i(e)),n(e,"spacingX",it,i(e)),n(e,"spacingY",rt,i(e)),n(e,"blockList",at,i(e)),n(e,"column",ot,i(e)),n(e,"row",st,i(e)),e}e(o,t),o.getInstance=function(){return o._instance};var s=o.prototype;return s.onLoad=function(){o._instance=this},s.init=function(){Oe.getInstance().isStolen?this.requestFriendFarmLand():this.requestFarmLand(),this.blockContainer=v("MainCanvas/Block/List"),this.lockBlock=v("MainCanvas/Block/Lock"),this.unlockBlock=v("MainCanvas/Block/Unlock"),this.sprite=v("MainCanvas/Block/Lock/Sprite")},s.createblockLayout=function(){for(var e=this,t=this.sprite.getComponent(m).contentSize.width,n=this.sprite.getComponent(m).contentSize.height,i=this.unlockBlock.position.x,r=this.unlockBlock.position.y,a=0;a<this.row;a++)for(var o=function(){var o=i+s*(t+e.spacingX),c=r-a*(n+e.spacingY),l=null,u=a*e.column+s;(l=e.blockList[u].status?b(e.unlockBlock):b(e.lockBlock)).active=!0,e.blockContainer.addChild(l),l.setPosition(o,c),l.on(C.EventType.TOUCH_END,(function(t){e.onBlockClick(t,l,e.blockList[u])})),l.on(C.EventType.MOUSE_DOWN,(function(t){e.onBlockClick(t,l,e.blockList[u])})),(new ut).updatePlantStatus(l,e.blockList[u])},s=0;s<this.column;s++)o()},s.updateBlock=function(e){var t=new ut,n=this.blockList.findIndex((function(t){return t.id===e}));t.resetNode(this.blockContainer.children[n]),t.updatePlantStatus(this.blockContainer.children[n],this.blockList[n])},s.onBlockClick=function(e,t,n){var i=kn.getInstance();i&&0===n.status&&(i.showDialog(e,"LockBlock"),i.setTargetBlock(t,n))},s.resetAllSchedule=function(){var e;null!=(e=this.blockContainer)&&e.children&&this.blockContainer.children.forEach((function(e,t){e.getChildByName("Countdown")&&(e.getChildByName("Countdown").hasSchedule=!1)}))},s.requestFarmLand=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/farm/farmland",{method:"GET"});case 3:(t=e.sent).ok?(this.blockList=t.data.data,this.blockContainer.removeAllChildren(),this.createblockLayout()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.updateFarmLand=function(){var e=r(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/farm/farmland",{method:"GET"});case 3:(n=e.sent).ok?(this.blockList=n.data.data,this.updateBlock(t)):console.error("Request failed with status:",n.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s.harvestFarmland=function(){var e=r(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/farm/farmland/harvest",{method:"POST",body:{farmlandId:t}});case 3:(n=e.sent).ok?this.updateFarmLand(t):console.error("Request failed with status:",n.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),s.unLockBlock=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kn.getInstance(),e.prev=1,e.next=4,fe("/api/v1/farm/farmland/extend",{method:"POST"});case 4:(n=e.sent).ok?(this.requestFarmLand(),t.closeDialog(null,"LockBlock")):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),s.requestFriendFarmLand=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/farm/farmland/userFarmlandList/"+t.stolenId,{method:"GET"});case 4:(n=e.sent).ok?(this.blockList=n.data.data,this.blockContainer=v("MainCanvas/Block/List"),this.blockContainer.removeAllChildren(),this.createblockLayout()):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),s.stealFarmland=function(){var e=r(a().mark((function e(t,n){var i,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/squad/steal",{method:"POST",body:{farmlandId:t,memberId:i.stolenId,plantId:n}});case 4:(r=e.sent).ok&&200===r.data.code?(i.setMessageLabel(ee),this.updateFarmLand(t)):i.setMessageLabel(te),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),i.setMessageLabel(te),console.error("Error:",e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}(),o}(d))._instance=void 0,$e=t((Qe=ct).prototype,"blockContainer",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(Qe.prototype,"lockBlock",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(Qe.prototype,"unlockBlock",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Qe.prototype,"sprite",[Ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(Qe.prototype,"spacingX",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),rt=t(Qe.prototype,"spacingY",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),at=t(Qe.prototype,"blockList",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=t(Qe.prototype,"column",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),st=t(Qe.prototype,"row",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),Ke=Qe))||Ke);l._RF.pop(),l._RF.push({},"e36ebc+EJdPXJpXVOKtjmi0","genBag",void 0);var wt,Bt=u.ccclass,kt=u.property,Lt=Bt("GenBag")(((bt=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"seedList",dt,i(e)),n(e,"USeedList",ft,i(e)),n(e,"USeedSection",gt,i(e)),n(e,"seedSpacingY",mt,i(e)),n(e,"seedSpacingX",vt,i(e)),e}e(o,t),o.getInstance=function(){return o._instance};var s=o.prototype;return s.onLoad=function(){o._instance=this,this.requestPackageList(),this.USeedList=v("popBox/Canvas/Bag/List"),this.USeedSection=v("popBox/Canvas/Bag/Section")},s.createPackageLayout=function(){var e=this;if(0!==this.seedList.length){var t=this.USeedSection.getChildByName("Bg").getComponent(m).contentSize.height,n=this.USeedSection.getChildByName("Bg").getComponent(m).contentSize.width,i=this.USeedSection.position.x-376,r=this.USeedSection.position.y-667;this.seedList.forEach((function(a,o){var s=r-Math.floor(o/3)*(t+e.seedSpacingY),c=i+o%3*(n+e.seedSpacingX),l=b(e.USeedSection);e.USeedList.addChild(l),l.active=!0,l.setPosition(c,s),l.getChildByName("Fruit").getChildByName("Number").getChildByName("Label").getComponent(y).string=a.quantity+"",l.getChildByName("TimeGain").getChildByName("Label").getComponent(y).string="+"+a.quantity+"/block",l.getChildByName("Time").getComponent(y).string=Se(a.maturityTime);var u="";switch(a.name){case"西红柿":u="tomato";break;case"萝卜":u="carrot";break;case"茄子":u="eggplant";break;default:u="carrot"}L.load(u+"/spriteFrame",U,(function(e,t){e?console.error("Failed to load sprite:",e):(l.getChildByName("Fruit").getChildByName("Picture").getComponent(I).spriteFrame=t,l.addComponent(Ne).setTargetNode(l,a))}))}))}},s.farmlandPlant=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=kn.getInstance()).targetBlockInfo.id){e.next=5;break}return e.next=4,this.requestFarmLandPlant(t.targetBlockInfo.id,t.targetSeedInfo.id);case 4:t.closeDialog(null,"Bag");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.requestPackageList=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/seed/package",{method:"GET"});case 3:(t=e.sent).ok?(this.seedList=t.data.data,this.USeedList.removeAllChildren(),this.createPackageLayout()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.requestFarmLandPlant=function(){var e=r(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/farm/farmland/plant",{method:"POST",body:{farmlandId:t,seedId:n}});case 3:(i=e.sent).ok?Ct.getInstance().updateFarmLand(t):console.error("Request failed with status:",i.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),o}(d))._instance=void 0,dt=t((ht=bt).prototype,"seedList",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ft=t(ht.prototype,"USeedList",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=t(ht.prototype,"USeedSection",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=t(ht.prototype,"seedSpacingY",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),vt=t(ht.prototype,"seedSpacingX",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),pt=ht))||pt;l._RF.pop(),l._RF.push({},"9d93fUEAAZO6pJrp5/BDy6T","buySeedEffect",void 0);var Ut,It,xt,Mt,Nt,Ft,Rt,Tt,_t=(0,u.ccclass)("BuySeedEffect")(wt=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).targetNode=null,e.targetData=void 0,e}e(n,t);var i=n.prototype;return i.setTargetNode=function(e,t){this.targetNode=e,this.targetData=t,this.targetNode.on(C.EventType.MOUSE_DOWN,this.onMouseDown,this),this.targetNode.on(C.EventType.TOUCH_START,this.onTouchStart,this)},i.onTouchStart=function(){this.emitEvent()},i.onMouseDown=function(){this.emitEvent()},i.emitEvent=function(){var e=kn.getInstance(),t=In.getInstance();e&&(e.showDialog(null,"BuySeed"),e.setTargetBuySeed(this.targetData),t.updateBuySeedInfo(this.targetData))},n}(d))||wt;l._RF.pop(),l._RF.push({},"b5b2aoNUWBOsa1XQan6xuBr","genShop",void 0);var zt,At,qt,Pt,Et,Dt,Ot,Ht,Wt,Yt,Xt,Gt,Vt,jt,Jt,Zt,Kt,Qt,$t,en,tn,nn,rn,an,on,sn,cn=u.ccclass,ln=u.property,un=cn("GenShop")(((Tt=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"seedList",xt,i(e)),n(e,"USeedList",Mt,i(e)),n(e,"USeedSection",Nt,i(e)),n(e,"seedSpacingY",Ft,i(e)),n(e,"seedSpacingX",Rt,i(e)),e}e(o,t),o.getInstance=function(){return o._instance};var s=o.prototype;return s.onLoad=function(){o._instance=this,this.requestShopList(),this.USeedList=v("popBox/Canvas/Shop/ScrollView/view/content"),this.USeedSection=v("popBox/Canvas/Shop/ScrollView/view/content/Section")},s.createShopLayout=function(){var e=this,t=this.USeedSection.getChildByName("Bg").getComponent(m).contentSize.height,n=this.USeedSection.getChildByName("Bg").getComponent(m).contentSize.width,i=this.USeedSection.position.x,r=this.USeedSection.position.y;this.seedList.forEach((function(a,o){var s=r-Math.floor(o/3)*(t+e.seedSpacingY),c=i+o%3*(n+e.seedSpacingX),l=b(e.USeedSection);e.USeedList.addChild(l),l.active=!0,l.setPosition(c,s),l.getChildByName("TimeGain").getChildByName("Label").getComponent(y).string="+"+a.points+"/block",l.getChildByName("Time").getComponent(y).string=Se(a.maturityTime);var u="";switch(a.name){case"西红柿":u="tomato";break;case"萝卜":u="carrot";break;case"茄子":u="eggplant";break;default:u="carrot"}L.load(u+"/spriteFrame",U,(function(e,t){e?console.error("Failed to load sprite:",e):l.getChildByName("Fruit").getChildByName("Picture").getComponent(I).spriteFrame=t})),l.addComponent(_t).setTargetNode(l.getChildByName("Button"),a)}))},s.requestShopList=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/seed/list?beginId=1&pageSize=10",{method:"GET"});case 3:(t=e.sent).ok?(this.seedList=t.data.data,this.USeedList.removeAllChildren(),this.createShopLayout()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.buySeed=function(){var e=r(a().mark((function e(t,n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/seed/buy",{method:"POST",body:{quantity:n,seedId:t}});case 3:(i=e.sent).ok||console.error("Request failed with status:",i.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),o}(d))._instance=void 0,xt=t((It=Tt).prototype,"seedList",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mt=t(It.prototype,"USeedList",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=t(It.prototype,"USeedSection",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=t(It.prototype,"seedSpacingY",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),Rt=t(It.prototype,"seedSpacingX",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Ut=It))||Ut;l._RF.pop(),l._RF.push({},"02964fGKTRAZLPQ0OcOdX+l","dialog",void 0);var pn,hn,dn,fn,gn,mn,vn,bn,yn,Sn,Cn,wn=u.ccclass,Bn=u.property,kn=(zt=wn("Dialog"),At=Bn(C),qt=Bn(C),Pt=Bn(C),Et=Bn(C),Dt=Bn(C),Ot=Bn(C),Ht=Bn(C),Wt=Bn(C),Yt=Bn(C),zt(((sn=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"bagBox",Vt,i(e)),n(e,"shopBox",jt,i(e)),n(e,"lockBlockBox",Jt,i(e)),n(e,"buySeedBox",Zt,i(e)),n(e,"buyPropsBox",Kt,i(e)),n(e,"buyCoinsBox",Qt,i(e)),n(e,"createCircleBox",$t,i(e)),n(e,"settingBox",en,i(e)),n(e,"overlayMask",tn,i(e)),n(e,"targetBlock",nn,i(e)),n(e,"targetBlockInfo",rn,i(e)),n(e,"targetSeedInfo",an,i(e)),n(e,"targetBuySeedInfo",on,i(e)),e}e(r,t),r.getInstance=function(){return r._instance};var a=r.prototype;return a.onLoad=function(){r._instance=this,this.bagBox=v("popBox/Canvas/Bag"),this.shopBox=v("popBox/Canvas/Shop"),this.lockBlockBox=v("popBox/Canvas/LockBlock"),this.buySeedBox=v("popBox/Canvas/BuySeed"),this.buyPropsBox=v("popBox/Canvas/BuyProps"),this.buyCoinsBox=v("popBox/Canvas/BuyCoins"),this.createCircleBox=v("popBox/Canvas/CreateCircle"),this.settingBox=v("popBox/Canvas/Setting"),this.overlayMask=v("popBox/Canvas/OverlayMask"),this.bagBox.active=!1,this.shopBox.active=!1,this.lockBlockBox.active=!1,this.buySeedBox.active=!1,this.buyPropsBox.active=!1,this.buyCoinsBox.active=!1,this.createCircleBox.active=!1,this.settingBox.active=!1,this.overlayMask.active=!1},a.showDialog=function(e,t){switch(t){case"Bag":this.bagBox.active=!0,Lt.getInstance().requestPackageList();break;case"Shop":this.shopBox.active=!0,un.getInstance().requestShopList();break;case"LockBlock":this.lockBlockBox.active=!0;break;case"BuySeed":this.buySeedBox.active=!0;break;case"BuyProps":this.buyPropsBox.active=!0;break;case"BuyCoins":this.buyCoinsBox.active=!0;break;case"CreateCircle":this.createCircleBox.active=!0;break;case"Setting":this.settingBox.active=!0}this.overlayMask.active=!0},a.closeDialog=function(e,t){switch(t){case"Bag":this.bagBox.active=!1,this.overlayMask.active=!1;break;case"Shop":this.shopBox.active=!1,this.overlayMask.active=!1;break;case"LockBlock":this.lockBlockBox.active=!1,this.overlayMask.active=!1;break;case"BuySeed":this.buySeedBox.active=!1;break;case"BuyProps":this.buyPropsBox.active=!1,this.overlayMask.active=!1;break;case"BuyCoins":this.buyCoinsBox.active=!1,this.overlayMask.active=!1;break;case"CreateCircle":this.createCircleBox.active=!1,this.overlayMask.active=!1;break;case"Setting":this.settingBox.active=!1,this.overlayMask.active=!1}},a.setTargetBlock=function(e,t){this.targetBlock=e,this.targetBlockInfo=t},a.setTargetSeed=function(e){this.targetSeedInfo=e},a.setTargetBuySeed=function(e){this.targetBuySeedInfo=e},r}(d))._instance=void 0,Vt=t((Gt=sn).prototype,"bagBox",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=t(Gt.prototype,"shopBox",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=t(Gt.prototype,"lockBlockBox",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zt=t(Gt.prototype,"buySeedBox",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kt=t(Gt.prototype,"buyPropsBox",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=t(Gt.prototype,"buyCoinsBox",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=t(Gt.prototype,"createCircleBox",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=t(Gt.prototype,"settingBox",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tn=t(Gt.prototype,"overlayMask",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=t(Gt.prototype,"targetBlock",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rn=t(Gt.prototype,"targetBlockInfo",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),an=t(Gt.prototype,"targetSeedInfo",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),on=t(Gt.prototype,"targetBuySeedInfo",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=Gt))||Xt);l._RF.pop(),l._RF.push({},"bf977CH5zNFQo7o3Tw2Zk/Q","buySeed",void 0);var Ln=u.ccclass,Un=u.property,In=Ln("BuySeed")(((Cn=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"USeedSprite",dn,i(e)),n(e,"USeedProfit",fn,i(e)),n(e,"USeedRipeningTime",gn,i(e)),n(e,"USeedTotalCost",mn,i(e)),n(e,"USeedNumber",vn,i(e)),n(e,"USeedIncrease",bn,i(e)),n(e,"USeedMinimize",yn,i(e)),n(e,"seedNumber",Sn,i(e)),e}e(o,t),o.getInstance=function(){return o._instance};var s=o.prototype;return s.onLoad=function(){o._instance=this,this.USeedSprite=v("popBox/Canvas/BuySeed/Content/Fruit/Picture"),this.USeedProfit=v("popBox/Canvas/BuySeed/Content/Effect/Profit"),this.USeedRipeningTime=v("popBox/Canvas/BuySeed/Content/Effect/RipeningTime"),this.USeedTotalCost=v("popBox/Canvas/BuySeed/Content/Options/Cost"),this.USeedNumber=v("popBox/Canvas/BuySeed/Content/Options/Count/Number"),this.USeedIncrease=v("popBox/Canvas/BuySeed/Content/Options/Content/Increase"),this.USeedMinimize=v("popBox/Canvas/BuySeed/Content/Options/Content/Minimize")},s.updateBuySeedInfo=function(e){var t=this,n=null;switch(e.name){case"西红柿":n="tomato";break;case"萝卜":n="carrot";break;case"茄子":n="eggplant";break;default:n="carrot"}L.load(n+"/spriteFrame",U,(function(e,n){e?console.error("Failed to load sprite:",e):t.USeedSprite.getComponent(I).spriteFrame=n})),this.USeedProfit.getChildByName("Value").getComponent(y).string="+"+e.points+"/block",this.USeedRipeningTime.getChildByName("Value").getComponent(y).string=e.maturityTime+"min",this.USeedTotalCost.getChildByName("Value").getComponent(y).string="0k",this.USeedNumber.getChildByName("Value").getComponent(y).string="0",this.seedNumber=0},s.increaseEmit=function(){var e=kn.getInstance();this.seedNumber++,this.USeedNumber.getChildByName("Value").getComponent(y).string=this.seedNumber+"",this.USeedTotalCost.getChildByName("Value").getComponent(y).string=e.targetBuySeedInfo.price*this.seedNumber+"k"},s.minimizeEmit=function(){if(0!==this.seedNumber){var e=kn.getInstance();this.seedNumber--,this.USeedNumber.getChildByName("Value").getComponent(y).string=this.seedNumber+"",this.USeedTotalCost.getChildByName("Value").getComponent(y).string=e.targetBuySeedInfo.price*this.seedNumber+"k"}},s.buySeed=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=kn.getInstance(),e.prev=1,e.next=4,fe("/api/v1/seed/buy",{method:"POST",body:{quantity:this.seedNumber,seedId:t.targetBuySeedInfo.id}});case 4:(n=e.sent).ok?t.closeDialog(null,"BuySeed"):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o}(d))._instance=void 0,dn=t((hn=Cn).prototype,"USeedSprite",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fn=t(hn.prototype,"USeedProfit",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gn=t(hn.prototype,"USeedRipeningTime",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mn=t(hn.prototype,"USeedTotalCost",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vn=t(hn.prototype,"USeedNumber",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bn=t(hn.prototype,"USeedIncrease",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yn=t(hn.prototype,"USeedMinimize",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Sn=t(hn.prototype,"seedNumber",[Un],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pn=hn))||pn;l._RF.pop();var xn,Mn,Nn,Fn,Rn,Tn,_n,zn,An,qn,Pn,En,Dn,On,Hn,Wn,Yn,Xn,Gn,Vn,jn,Jn,Zn,Kn,Qn,$n,ei=!1;l._RF.push({},"d7acdht5zdFR5TVZ/+xo0sF","roundBox",void 0);var ti,ni,ii,ri,ai,oi,si,ci,li,ui,pi,hi,di=function(e){return e[e["CUSTOM: 自定义尺寸"]=0]="CUSTOM: 自定义尺寸",e[e["TRIMMED: 原始尺寸裁剪透明像素"]=1]="TRIMMED: 原始尺寸裁剪透明像素",e[e["RAW: 图片原始尺寸"]=2]="RAW: 图片原始尺寸",e}({}),fi=[0,9,11,0,11,1,2,8,10,2,4,8,3,5,7,3,7,6],gi=u,mi=gi.ccclass,vi=gi.property,bi=gi.menu,yi=(xn=mi("Corner"),Mn=vi({displayName:ei}),Nn=vi({displayName:ei}),Fn=vi({displayName:ei}),Rn=vi({displayName:ei}),xn((zn=t((_n=function(){n(this,"leftBottom",zn,this),n(this,"rightBottom",An,this),n(this,"leftTop",qn,this),n(this,"rightTop",Pn,this),this.visible=null}).prototype,"leftBottom",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),An=t(_n.prototype,"rightBottom",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qn=t(_n.prototype,"leftTop",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Pn=t(_n.prototype,"rightTop",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Tn=_n))||Tn),Si=(En=bi("Public/RoundBox"),Dn=vi({type:x,readonly:!0}),On=vi({type:U}),Hn=vi({type:M(di)}),Wn=vi({type:N,displayName:ei}),Yn=vi({displayName:ei}),Xn=vi({displayName:ei}),mi(Gn=En((jn=t((Vn=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"atlas",jn,i(e)),n(e,"_spriteFrame",Jn,i(e)),n(e,"_sizeMode",Zn,i(e)),n(e,"_segment",Kn,i(e)),n(e,"_radius",Qn,i(e)),n(e,"_corner",$n,i(e)),e}e(r,t);var a=r.prototype;return a.__preload=function(){t.prototype.__preload.call(this),this._assembler={updateColor:this.updateColor.bind(this),updateRenderData:this.onFlushed.bind(this),fillBuffers:this.fillBuffer.bind(this)}},a.onLoad=function(){t.prototype.onLoad.call(this),this.updateSpriteFrame(),this.updateCorner(),this.createBuffer(),this.node.on(F.SIZE_CHANGED,this.onSizeChanged,this)},a.onDestroy=function(){t.prototype.onDestroy.call(this),this.node.off(F.SIZE_CHANGED,this.onSizeChanged,this)},a.updateCorner=function(){var e=this._corner;e.visible=[e.leftBottom,e.rightBottom,e.rightTop,e.leftTop]},a.createBuffer=function(){this.destroyRenderData();for(var e=this._renderData=this.requestRenderData(),t=0,n=0,i=this._corner.visible;n<4;i[n++]&&++t);e.dataLength=12+(this.segment-1)*t,e.resize(e.dataLength,3*(6+this.segment*t)),this._updateColor(),this.updateIData()},a.fillBuffer=function(){var e=this._renderData,t=e.chunk;if(this.node.hasChangedFlags||e.vertDirty){for(var n=t.vb,i=e.data,r=this.node.worldMatrix,a=r.m00,o=r.m01,s=r.m04,c=r.m05,l=r.m12,u=r.m13,p=0,h=0,d=n.length,f=e.floatStride;p<d;p+=f,++h){var g=i[h].x,m=i[h].y;n[p]=a*g+s*m+l,n[p+1]=o*g+c*m+u}e.vertDirty=!1}for(var v=t.vertexOffset,b=t.meshBuffer,y=b.iData,S=t.ib,C=0,w=e.indexCount,B=b.indexOffset;C<w;y[B++]=v+S[C++]);b.indexOffset+=e.indexCount},a.updateMaterial=function(){t.prototype.updateMaterial.call(this),null!=this._customMaterial||(this._customMaterial=this.getSharedMaterial(0))},a.onSizeChanged=function(){if(this._spriteFrame){var e=this.node.getComponent(m);switch(this._sizeMode){case di["TRIMMED: 原始尺寸裁剪透明像素"]:var t=this._spriteFrame._rect;if(e.width===t.width&&e.height===t.height)return;break;case di["RAW: 图片原始尺寸"]:var n=this._spriteFrame._originalSize;if(e.width===n.width&&e.height===n.height)return}this._sizeMode=di["CUSTOM: 自定义尺寸"]}},a.updateSpriteFrame=function(){this.spriteFrame?(this._renderData&&(this._renderData.textureDirty=!0),this.updateSizeMode()):this.atlas=null},a.updateSizeMode=function(){var e;if(this._spriteFrame){var t=null!=(e=this.node.getComponent(m))?e:this.node.addComponent(m);switch(this._sizeMode){case di["TRIMMED: 原始尺寸裁剪透明像素"]:t.setContentSize(this._spriteFrame._rect.size);break;case di["RAW: 图片原始尺寸"]:t.setContentSize(this._spriteFrame._originalSize)}}},a.onFlushed=function(){var e=this._spriteFrame;e&&(this.updateVData(),this._renderData.updateRenderData(this,e))},a.updateVData=function(){var e=this._renderData,t=e.data,n=this.node._uiProps.uiTransformComp,i=n.width,r=n.height,a=n.anchorX,o=n.anchorY,s=-i*a,c=-r*o,l=i*(1-a),u=r*(1-o),p=Math.min(this._radius,Math.min(i,r)/2),h=s+p,d=c+p,f=l-p,g=u-p,m=this._corner;t[0].x=h,t[0].y=m.leftBottom?d:c,t[1].x=s,t[1].y=t[0].y,t[2].x=h,t[2].y=c,t[3].x=f,t[3].y=m.rightBottom?d:c,t[4].x=f,t[4].y=c,t[5].x=l,t[5].y=t[3].y,t[6].x=f,t[6].y=m.rightTop?g:u,t[7].x=l,t[7].y=t[6].y,t[8].x=f,t[8].y=u,t[9].x=h,t[9].y=m.leftTop?g:u,t[10].x=h,t[10].y=u,t[11].x=s,t[11].y=t[9].y;for(var v=Math.PI/(this._segment<<1),b=Math.sin(v),y=Math.cos(v),S=m.visible,C=0,w=12;C<4;++C)if(S[C])for(var B=3*C,k=t[B].x,L=t[B].y,U=t[B+1].x-k,I=t[B+1].y-L,x=0,M=this._segment-1;x<M;++x)t[w].x=k+U*y-I*b,t[w].y=L+I*y+U*b,U=t[w].x-k,I=t[w].y-L,++w;for(var N=e.chunk.vb,F=3,R=N.length,T=e.floatStride,_=0;F<R;F+=T,++_)N[F]=(t[_].x-s)/i,N[F+1]=(t[_].y-c)/r;this.fitUV(N)},a.fitUV=function(e){if(this.spriteFrame){var t=this.spriteFrame.uv;if(this.spriteFrame._rotated)for(var n=t[0],i=t[1],r=t[4]-n,a=t[3]-i,o=3,s=e.length,c=this._renderData.floatStride;o<s;o+=c){var l=e[o];e[o]=n+e[o+1]*r,e[o+1]=i+l*a}else{n=t[0],i=t[1],r=t[2]-n,a=t[5]-i;for(var u=3,p=e.length,h=this._renderData.floatStride;u<p;u+=h)e[u]=n+e[u]*r,e[u+1]=i+e[u+1]*a}}},a.updateColor=function(){for(var e=this._renderData,t=e.chunk.vb,n=this.color,i=n.r/255,r=n.g/255,a=n.b/255,o=n.a/255,s=5,c=t.length,l=e.floatStride;s<c;s+=l)t[s]=i,t[s+1]=r,t[s+2]=a,t[s+3]=o},a.updateIData=function(){for(var e=this._renderData.chunk._ib,t=fi.length-1;t>-1;e[t]=fi[t--]);for(var n=fi.length,i=this._corner.visible,r=36,a=0;a<4;++a)if(i[a]){for(var o=3*a,s=o+1,c=r/3,l=0,u=this._segment-1;l<u;++l)e[n++]=o,e[n++]=s,e[n++]=c,s=c++,r+=3;e[n++]=o,e[n++]=s,e[n++]=o+2}},a._render=function(e){e.commitComp(this,this._renderData,this._spriteFrame,this._assembler,null)},a._canRender=function(){var e;return t.prototype._canRender.call(this)&&!(null==(e=this._spriteFrame)||!e.texture)},s(r,[{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(e){this._spriteFrame=e,this.updateSpriteFrame(),this.markForUpdateRenderData()}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(e){this._sizeMode=e,this.updateSizeMode()}},{key:"segment",get:function(){return this._segment},set:function(e){this._segment=Math.max(e,1),this.createBuffer(),this.markForUpdateRenderData()}},{key:"radius",get:function(){return this._radius},set:function(e){this._radius=Math.max(e,0),this.markForUpdateRenderData()}},{key:"corner",get:function(){return this._corner},set:function(e){this._corner=e,this.updateCorner(),this.createBuffer(),this.markForUpdateRenderData()}}]),r}(R)).prototype,"atlas",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jn=t(Vn.prototype,"_spriteFrame",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(Vn.prototype,"spriteFrame",[On],Object.getOwnPropertyDescriptor(Vn.prototype,"spriteFrame"),Vn.prototype),Zn=t(Vn.prototype,"_sizeMode",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return di["TRIMMED: 原始尺寸裁剪透明像素"]}}),t(Vn.prototype,"sizeMode",[Hn],Object.getOwnPropertyDescriptor(Vn.prototype,"sizeMode"),Vn.prototype),Kn=t(Vn.prototype,"_segment",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),t(Vn.prototype,"segment",[Wn],Object.getOwnPropertyDescriptor(Vn.prototype,"segment"),Vn.prototype),Qn=t(Vn.prototype,"_radius",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),t(Vn.prototype,"radius",[Yn],Object.getOwnPropertyDescriptor(Vn.prototype,"radius"),Vn.prototype),$n=t(Vn.prototype,"_corner",[vi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new yi}}),t(Vn.prototype,"corner",[Xn],Object.getOwnPropertyDescriptor(Vn.prototype,"corner"),Vn.prototype),Gn=Vn))||Gn)||Gn);l._RF.pop(),l._RF.push({},"c70a3VLQFpIIrosgOuysjaJ","genInfo",void 0);var Ci,wi,Bi,ki,Li,Ui,Ii,xi,Mi,Ni,Fi,Ri,Ti,_i,zi=u.ccclass,Ai=u.property,qi=zi("GenInfo")(((hi=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"UUserName",ii,i(e)),n(e,"UPointsBalance",ri,i(e)),n(e,"UAddition",ai,i(e)),n(e,"UHarvest",oi,i(e)),n(e,"UStolenFrom",si,i(e)),n(e,"UBeStolen",ci,i(e)),n(e,"UAvatar",li,i(e)),n(e,"uagg",ui,i(e)),n(e,"friendInfo",pi,i(e)),e}e(o,t),o.getInstance=function(){return o._instance};var s=o.prototype;return s.onLoad=function(){o._instance=this,this.UUserName=v("MainCanvas/TopContent/Person/Name"),this.UPointsBalance=v("MainCanvas/TopContent/Person/Money"),this.UAddition=v("MainCanvas/TopContent/Person/Addition"),this.UHarvest=v("MainCanvas/TopContent/Income/Mask/Section/Harvest"),this.UStolenFrom=v("MainCanvas/TopContent/Income/Mask/Section/StolenFrom"),this.UBeStolen=v("MainCanvas/TopContent/Income/Mask/Section/BeStolen"),this.UAvatar=v("MainCanvas/TopContent/Avatar/RoundBox")},s.init=function(){Oe.getInstance().isStolen||(this.requestUAgg(),this.requestUserInfo())},s.loadAvatarFromUrl=function(){var e=r(a().mark((function e(t){var n,i,r,o,s=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:8989/proxy?url="+t);case 3:return n=e.sent,e.next=6,n.blob();case 6:i=e.sent,r=new Image,o=URL.createObjectURL(i),r.src=o,r.onload=function(){var e=new T(r),t=new _;t.image=e;var n=new U;n.texture=t,s.UAvatar&&(console.log(s.UAvatar),s.UAvatar.getComponent(m).width=90,s.UAvatar.getComponent(m).height=90,s.UAvatar.getComponent(Si).spriteFrame=n),URL.revokeObjectURL(o)},r.onerror=function(e){console.error("加载 SVG 图片失败：",e)},e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("代理请求失败：",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),s.updateUserInfo=function(){var e=Oe.getInstance(),t=this.friendInfo?this.friendInfo:e.userInfo;this.UUserName.getChildByName("Label").getComponent(y).string=t.tgUsername,this.UPointsBalance.getChildByName("Label").getComponent(y).string=t.pointsBalance+"",this.UAddition.getChildByName("Label").getComponent(y).string="+"+t.radio+"%"},s.requestUserInfo=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/farm/u/userInfo",{method:"GET"});case 3:(t=e.sent).ok?((n=Oe.getInstance()).userInfo=t.data.data,this.friendInfo=null,this.loadAvatarFromUrl(n.userInfo.avatar),this.updateUserInfo()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.updateUAgg=function(){this.UHarvest.getChildByName("Value").getComponent(y).string=this.uagg.mePointSum+"",this.UStolenFrom.getChildByName("Value").getComponent(y).string=this.uagg.friendPointSum+"",this.UBeStolen.getChildByName("Value").getComponent(y).string=this.uagg.stealPointSum+""},s.requestUAgg=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/farm/u/agg",{method:"GET"});case 3:(t=e.sent).ok?(this.uagg=t.data.data,this.updateUAgg()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.requestFriendInfo=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/farm/u/userInfo/"+t.stolenId,{method:"GET"});case 4:(n=e.sent).ok?(this.friendInfo=n.data.data,this.updateUserInfo(),this.loadAvatarFromUrl(this.friendInfo.avatar)):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o}(d))._instance=void 0,ii=t((ni=hi).prototype,"UUserName",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=t(ni.prototype,"UPointsBalance",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=t(ni.prototype,"UAddition",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=t(ni.prototype,"UHarvest",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=t(ni.prototype,"UStolenFrom",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ci=t(ni.prototype,"UBeStolen",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=t(ni.prototype,"UAvatar",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=t(ni.prototype,"uagg",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pi=t(ni.prototype,"friendInfo",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=ni))||ti;l._RF.pop(),l._RF.push({},"f96f6E8O1ZPkIiiE+Qk4gVz","circles",void 0);var Pi,Ei,Di,Oi,Hi,Wi,Yi,Xi,Gi,Vi=u.ccclass,ji=u.property;Vi("circles")((Bi=t((wi=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"squadList",Bi,i(e)),n(e,"USquad",ki,i(e)),n(e,"USquadList",Li,i(e)),n(e,"USquadSection",Ui,i(e)),n(e,"membersList",Ii,i(e)),n(e,"squadInfo",xi,i(e)),n(e,"USquadInfo",Mi,i(e)),n(e,"UMembers",Ni,i(e)),n(e,"UMembersList",Fi,i(e)),n(e,"UMembersSection",Ri,i(e)),n(e,"squadSpacingY",Ti,i(e)),n(e,"memberSpacingY",_i,i(e)),e}e(o,t);var s=o.prototype;return s.onLoad=function(){this.USquad=v("Canvas/UnJoined"),this.UMembers=v("Canvas/Joined"),this.USquadList=v("Canvas/UnJoined/Content/List"),this.USquadSection=v("Canvas/UnJoined/Content/Section"),this.UMembersList=v("Canvas/Joined/Content/List"),this.UMembersSection=v("Canvas/Joined/Content/Section"),this.USquadInfo=v("Canvas/Joined/Tips"),this.checkSquadList()},s.createSquadLayout=function(){var e=this,t=this.USquadSection.getComponent(m).contentSize.height,n=this.USquadSection.position.x,i=this.USquadSection.position.y;this.squadList.forEach((function(r,a){var o=i-a*(t+3*e.squadSpacingY/2),s=b(e.USquadSection);e.USquadList.addChild(s),s.active=!0,s.setPosition(n,o),s.getChildByName("People").getChildByName("Label").getComponent(y).string=r.memberCount+"",s.getChildByName("Name").getComponent(y).string=r.name,s.getChildByName("Button").squadId=r.id}))},s.createMembersLayout=function(){var e=this,t=this.UMembersSection.getComponent(m).contentSize.height,n=this.UMembersSection.position.x,i=this.UMembersSection.position.y;this.membersList.forEach((function(r,a){var o=i-a*(t+e.memberSpacingY),s=b(e.UMembersSection);e.UMembersList.addChild(s),s.active=!0,s.setPosition(n,o),s.getChildByName("Name").getComponent(y).string=r.tgUsername+"",s.getChildByName("Money").getChildByName("Label").getComponent(y).string=r.pointsBalance+"",s.getChildByName("Button").userId=r.id;var c="";a>=0&&a<3?(0===a&&(c="first"),1===a&&(c="second"),2===a&&(c="third"),L.load(c+"/spriteFrame",U,(function(e,t){e?console.error("Failed to load sprite:",e):(s.getChildByName("Ranking").active=!1,s.getChildByName("Icon").getComponent(I).spriteFrame=t)}))):(s.getChildByName("Icon").active=!1,s.getChildByName("Ranking").active=!0,s.getChildByName("Ranking").getComponent(y).string=a+1+"")}))},s.checkSquadList=function(){var e=Oe.getInstance();this.UMembersList.removeAllChildren(),null===e.userInfo.squadId?(this.UMembers.active=!1,this.USquad.active=!0,this.requestSquadList()):(this.UMembers.active=!0,this.USquad.active=!1,this.requestMembersList(),this.requestSquadInfo())},s.updateSquadInfo=function(){var e,t;this.USquadInfo.getChildByName("Name").getComponent(y).string=this.squadInfo.name,this.USquadInfo.getChildByName("People").getChildByName("Label").getComponent(y).string=this.squadInfo.memberCount+"",this.USquadInfo.getChildByName("Money").getChildByName("Label").getComponent(y).string=this.squadInfo.totalPoints+"",this.USquadInfo.getChildByName("Timer").getChildByName("Label").getComponent(y).string=(e=this.squadInfo.createdAt,(t=new Date(e)).getFullYear()+"."+(t.getMonth()+1<10?"0":"")+(t.getMonth()+1)+"."+(t.getDate()<10?"0":"")+t.getDate())},s.requestSquadList=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/squad/list",{method:"GET"});case 3:(t=e.sent).ok?(this.squadList=t.data.data.list,this.USquadList.removeAllChildren(),this.createSquadLayout()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s.requestMembersList=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/squad/members",{method:"GET"},{squadId:t.userInfo.squadId,pageNum:1,pageSize:10});case 4:(n=e.sent).ok?(this.membersList=n.data.data.list,this.UMembersList.removeAllChildren(),this.createMembersLayout()):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),s.requestSquadInfo=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/squad/info",{method:"GET"},{squadId:t.userInfo.squadId});case 4:(n=e.sent).ok?(this.squadInfo=n.data.data,this.updateSquadInfo()):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),s.quitSquad=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/squad/leave",{method:"POST",body:{squadId:t.userInfo.squadId}});case 4:(n=e.sent).ok?(qi.getInstance().requestUserInfo(),this.UMembers.active=!1,this.USquad.active=!0,this.UMembersList.removeAllChildren(),this.requestSquadList()):console.error("Request failed with status:",n.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),s.joinSquad=function(){var e=r(a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/squad/join",{method:"POST",body:{squadId:t.currentTarget.squadId}});case 4:(i=e.sent).ok?(n.userInfo.squadId=t.currentTarget.squadId,this.UMembers.active=!0,this.USquad.active=!1,this.requestMembersList()):console.error("Request failed with status:",i.status),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),s.createSquadBtnClick=function(){kn.getInstance().showDialog(null,"CreateCircle")},s.createSquad=function(){var e=r(a().mark((function e(t){var n,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v("popBox/Canvas/CreateCircle/EditBox/TEXT_LABEL").getComponent(y).string,console.log(n),e.prev=2,e.next=5,fe("/api/v1/squad/create",{method:"POST",body:{name:n}});case 5:(i=e.sent).ok?(kn.getInstance().closeDialog(null,"CreateCircle"),Oe.getInstance().userInfo.squadId=t.currentTarget.squadId,this.UMembers.active=!0,this.USquad.active=!1,this.requestMembersList()):console.error("Request failed with status:",i.status),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Error:",e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),o}(d)).prototype,"squadList",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ki=t(wi.prototype,"USquad",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Li=t(wi.prototype,"USquadList",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ui=t(wi.prototype,"USquadSection",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ii=t(wi.prototype,"membersList",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xi=t(wi.prototype,"squadInfo",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=t(wi.prototype,"USquadInfo",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ni=t(wi.prototype,"UMembers",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fi=t(wi.prototype,"UMembersList",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ri=t(wi.prototype,"UMembersSection",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=t(wi.prototype,"squadSpacingY",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),_i=t(wi.prototype,"memberSpacingY",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ci=wi));l._RF.pop(),l._RF.push({},"c9240r3DRhJM4DyFw/MJY38","dashedRectangle",void 0);var Ji,Zi,Ki,Qi,$i,er,tr,nr,ir,rr,ar,or,sr,cr,lr,ur,pr,hr=u.ccclass,dr=u.property;Pi=hr("DashedRectangle"),Ei=dr({type:z}),Pi((Hi=t((Oi=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"rectWidth",Hi,i(e)),n(e,"rectHeight",Wi,i(e)),n(e,"dashLength",Yi,i(e)),n(e,"gapLength",Xi,i(e)),n(e,"lineColor",Gi,i(e)),e.graphics=null,e}e(r,t);var a=r.prototype;return a.start=function(){this.graphics=this.node.getComponent(A),this.graphics?(this.graphics.strokeColor=this.lineColor,this.graphics.lineWidth=2,this.drawDashedRectangle()):console.error("Graphics component not found!")},a.drawDashedRectangle=function(){var e=this.graphics,t=-this.rectWidth/2,n=-this.rectHeight/2;e.clear(),this.drawDashedLine(t,n,t+this.rectWidth,n),this.drawDashedLine(t+this.rectWidth,n,t+this.rectWidth,n+this.rectHeight),this.drawDashedLine(t+this.rectWidth,n+this.rectHeight,t,n+this.rectHeight),this.drawDashedLine(t,n+this.rectHeight,t,n),e.stroke()},a.drawDashedLine=function(e,t,n,i){for(var r=this.graphics,a=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),o=(n-e)/a,s=(i-t)/a,c=0;c<a;){var l=e+o*c,u=t+s*c,p=Math.min(this.dashLength,a-c),h=l+o*p,d=u+s*p;r.moveTo(l,u),r.lineTo(h,d),c+=this.dashLength+this.gapLength}},r}(d)).prototype,"rectWidth",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),Wi=t(Oi.prototype,"rectHeight",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),Yi=t(Oi.prototype,"dashLength",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Xi=t(Oi.prototype,"gapLength",[dr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Gi=t(Oi.prototype,"lineColor",[Ei],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new z(0,0,0,255)}}),Di=Oi));l._RF.pop(),l._RF.push({},"a002ad/BrZDyp4btCS2qOTX","drawRoundedRect",void 0);var fr,gr,mr,vr,br,yr,Sr,Cr,wr,Br,kr=u.ccclass,Lr=u.property;Ji=kr("DrawRoundedRect"),Zi=Lr({type:z}),Ki=Lr({type:z}),Ji((er=t(($i=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))||this).graphics=null,n(e,"rectWidth",er,i(e)),n(e,"rectHeight",tr,i(e)),n(e,"borderRadius",nr,i(e)),n(e,"borderWidth",ir,i(e)),n(e,"fillColor",rr,i(e)),n(e,"strokeColor",ar,i(e)),n(e,"startX",or,i(e)),n(e,"startY",sr,i(e)),n(e,"offsetX",cr,i(e)),n(e,"offsetY",lr,i(e)),n(e,"padding",ur,i(e)),n(e,"alignLeft",pr,i(e)),e}e(r,t);var a=r.prototype;return a.onLoad=function(){this.graphics=this.getComponent(A),this.graphics&&this.drawRoundedRect()},a.drawRoundedRect=function(){this.graphics&&(this.alignLeft?(this.startX=this.node.position.x+(this.rectWidth-2*this.borderWidth-2*this.offsetX)/2-this.borderWidth-this.offsetX,this.startY=this.node.position.y-this.rectHeight/2-this.borderWidth+this.offsetY/2):(this.startX=-this.rectWidth/2-this.borderWidth+this.offsetX,this.startY=-this.rectHeight/2-this.borderWidth+this.offsetY),this.graphics.fillColor=this.fillColor,this.graphics.roundRect(this.startX,this.startY,this.rectWidth,this.rectHeight,this.borderRadius),this.graphics.fillColor=this.fillColor,this.graphics.fill(),this.graphics.strokeColor=this.strokeColor,this.graphics.lineWidth=this.borderWidth,this.graphics.roundRect(this.startX-.5,this.startY-.5,this.rectWidth,this.rectHeight,this.borderRadius),this.graphics.stroke())},a.reRender=function(e){this.rectWidth=e+2*this.offsetX+2*this.borderWidth,this.graphics&&(this.graphics.clear(),this.drawRoundedRect())},r}(d)).prototype,"rectWidth",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),tr=t($i.prototype,"rectHeight",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),nr=t($i.prototype,"borderRadius",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ir=t($i.prototype,"borderWidth",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),rr=t($i.prototype,"fillColor",[Zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new z(255,255,255,255)}}),ar=t($i.prototype,"strokeColor",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new z(165,42,42,255)}}),or=t($i.prototype,"startX",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sr=t($i.prototype,"startY",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),cr=t($i.prototype,"offsetX",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lr=t($i.prototype,"offsetY",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ur=t($i.prototype,"padding",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pr=t($i.prototype,"alignLeft",[Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qi=$i));l._RF.pop(),l._RF.push({},"01addohebJAh7Jv+vgSHvFB","drawer",void 0);var Ur,Ir,xr,Mr,Nr,Fr,Rr,Tr,_r=u.ccclass,zr=u.property;fr=_r("Drawer"),gr=zr(C),mr=zr(w),vr=zr(w),fr((Sr=t((yr=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"drawer",Sr,i(e)),n(e,"isOpen",Cr,i(e)),n(e,"closedPosition",wr,i(e)),n(e,"openPosition",Br,i(e)),e}return e(r,t),r.prototype.toggleDrawer=function(){var e=v("MainCanvas/TopContent/Income/Drawer");this.isOpen=!this.isOpen;var t=this.isOpen?this.closedPosition:this.openPosition,n="";n=this.isOpen?"drawerclose/spriteFrame":"drawerexpand/spriteFrame",L.load(n,U,(function(t,n){t?console.error("Failed to load sprite:",t):e.getChildByName("Sprite").getComponent(I).spriteFrame=n})),B(this.drawer).to(.3,{position:t},{easing:"cubicOut"}).start()},r}(d)).prototype,"drawer",[gr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Cr=t(yr.prototype,"isOpen",[zr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),wr=t(yr.prototype,"closedPosition",[mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w(-300,0,0)}}),Br=t(yr.prototype,"openPosition",[vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w(0,0,0)}}),br=yr));l._RF.pop(),l._RF.push({},"bcb8a7iFMZPepIVAp76B+pd","harvest",void 0);var Ar,qr,Pr,Er,Dr,Or=u.ccclass,Hr=u.property;Or("harvest")((xr=t((Ir=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"harvestList",xr,i(e)),n(e,"UHarvestList",Mr,i(e)),n(e,"UHarvestSection",Nr,i(e)),n(e,"harvestSpacingX",Fr,i(e)),n(e,"harvestSpacingY",Rr,i(e)),n(e,"column",Tr,i(e)),e}e(o,t);var s=o.prototype;return s.onLoad=function(){this.requestHarvestList(),this.harvestSpacingY=40,this.UHarvestList=v("Canvas/Content/List"),this.UHarvestSection=v("Canvas/Content/Section");var e=kn.getInstance();e.buyPropsBox.active=!1,e.overlayMask.active=!1},s.createHarvestLayout=function(){var e=this,t=this.UHarvestSection.getComponent(m).contentSize.width,n=this.UHarvestSection.getComponent(m).contentSize.height,i=this.UHarvestSection.position.x,r=this.UHarvestSection.position.y;ie.forEach((function(a,o){var s=Math.floor(o/e.column),c=o%e.column,l=i+c*(t+e.harvestSpacingX),u=r-s*(n+e.harvestSpacingY),p=b(e.UHarvestSection);e.UHarvestList.addChild(p),p.active=!0,p.setPosition(l,u),p.getChildByName("Name").getComponent(y).string=a.skillType+"",p.getChildByName("Addition").getChildByName("Label").getComponent(y).string=a.ratio+"",p.getChildByName("Button").getChildByName("Label").getComponent(y).string=a.cost+""}))},s.requestHarvestList=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe("/api/v1/skill/list",{method:"GET"});case 3:(t=e.sent).ok?(this.harvestList=t.data.data,this.createHarvestLayout()):console.error("Request failed with status:",t.status),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),o}(d)).prototype,"harvestList",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=t(Ir.prototype,"UHarvestList",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nr=t(Ir.prototype,"UHarvestSection",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fr=t(Ir.prototype,"harvestSpacingX",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Rr=t(Ir.prototype,"harvestSpacingY",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),Tr=t(Ir.prototype,"column",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),Ur=Ir));l._RF.pop(),l._RF.push({},"0831c4LmoRAg43knIqECtKi","hideScrollbar",void 0);var Wr,Yr,Xr,Gr,Vr,jr,Jr,Zr=u.ccclass,Kr=u.property;Ar=Zr("HideScrollbar"),qr=Kr(q),Ar((Dr=t((Er=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"editBox",Dr,i(e)),e}e(r,t);var a=r.prototype;return a.start=function(){this.editBox.node.on("editing-did-began",this.onFocusIn,this)},a.onFocusIn=function(){window.document.getElementsByTagName("textarea")[0].style["overflow-y"]="hidden"},r}(d)).prototype,"editBox",[qr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pr=Er));l._RF.pop(),l._RF.push({},"42547J1eAdMh6xCLg4SYBfw","interface",void 0),l._RF.pop(),l._RF.push({},"0f0f9DRD7NJWodvoXGqb55Q","loadingScreen%20",void 0);var Qr,$r,ea,ta,na,ia,ra=u.ccclass,aa=u.property;Wr=ra("LoadingScreen"),Yr=aa(P),Xr=aa(y),Wr((jr=t((Vr=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"progressBar",jr,i(e)),n(e,"progressLabel",Jr,i(e)),e.targetScene="main",e}e(r,t);var a=r.prototype;return a.onLoad=function(){this.loadMainScene()},a.loadMainScene=function(){var e=this;h.preloadScene(this.targetScene,(function(t,n){var i=t/n;e.progressBar.progress=i,e.progressLabel.string="加载中... "+Math.floor(100*i)+"%"}),(function(t){console.log("可用场景列表：",h.getScene()),t?console.error("加载场景失败: "+e.targetScene,t):h.loadScene(e.targetScene)}))},r}(d)).prototype,"progressBar",[Yr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jr=t(Vr.prototype,"progressLabel",[Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gr=Vr));l._RF.pop(),l._RF.push({},"ad534xFMT9JSp8KEKnH95y0","main",void 0);var oa,sa=u.ccclass,ca=u.property;Qr=sa("main"),$r=ca(C),Qr(((ia=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"genBlock",na,i(e)),e}e(o,t);var s=o.prototype;return s.onLoad=function(){Oe.getInstance().isStolen?this.init():(this.userLogin(),h.preloadScene("circles"),h.preloadScene("harvest"))},s.init=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=qi.getInstance(),n=Ct.getInstance(),t.init(),n.init();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s.userLogin=function(){var e=r(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Oe.getInstance(),e.prev=1,e.next=4,fe("/api/v1/farm/u/login",{method:"POST"});case 4:(n=e.sent).ok?(t.isLogin=!0,this.init()):(t.isLogin=!1,console.error("Request failed with status:",n.status)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error:",e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),o}(d)).token=null,na=t((ta=ia).prototype,"genBlock",[$r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ct}}),ea=ta));l._RF.pop(),l._RF.push({},"8d2ecwxLPdKxLlJI/zZQnP0","overlayMask",void 0);var la,ua=u.ccclass;u.property,ua("OverlayMask")(oa=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).graphics=null,e.uiTransform=void 0,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this.graphics=this.getComponent(A),this.drawOverlay()},i.drawOverlay=function(){this.graphics&&(this.uiTransform=this.node.getComponent(m),this.graphics.clear(),this.graphics.fillColor.set(0,0,0,200),this.graphics.rect(-375,-724,this.uiTransform.contentSize.width,this.uiTransform.contentSize.height),this.graphics.fill())},n}(d));l._RF.pop(),l._RF.push({},"d9d11C1GqpBIavkY/LYnebM","popupStop",void 0);var pa,ha,da,fa,ga,ma,va,ba,ya,Sa,Ca,wa,Ba,ka=u.ccclass;u.property,ka("Popup")(la=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.onLoad=function(){this.node.on(E.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(E.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(E.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},i.onTouchStart=function(e){e.propagationStopped=!0},i.onTouchEnd=function(e){e.propagationStopped=!0},n}(d));l._RF.pop(),l._RF.push({},"08626Hd659EUqUjf1nWCufi","scaleAction",void 0);var La,Ua,Ia,xa,Ma,Na,Fa,Ra=u.ccclass,Ta=u.property;pa=Ra("scaleAction"),ha=Ta(C),da=Ta(N),fa=Ta(D),ga=Ta(D),ma=Ta(Boolean),pa((ya=t((ba=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"nodes",ya,i(e)),n(e,"sleep",Sa,i(e)),n(e,"scaleMax",Ca,i(e)),n(e,"scaleMin",wa,i(e)),n(e,"isChild",Ba,i(e)),e}e(r,t);var a=r.prototype;return a.start=function(){var e=this;if(this.isChild)this.nodes.children.forEach((function(t){var n=B().target(t).to(e.sleep,{scale:new w(e.scaleMax,e.scaleMax,0),position:t.position},{easing:"smooth"}).to(e.sleep,{scale:new w(e.scaleMin,e.scaleMin,0),position:t.position},{easing:"smooth"});B().target(t).repeatForever(n).start()}));else{var t=B().target(this.node).to(this.sleep,{scale:new w(this.scaleMax,this.scaleMax,0),position:this.node.position},{easing:"smooth"}).to(this.sleep,{scale:new w(this.scaleMin,this.scaleMin,0),position:this.node.position},{easing:"smooth"});B().target(this.node).repeatForever(t).start()}},a.update=function(e){},r}(d)).prototype,"nodes",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa=t(ba.prototype,"sleep",[da],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ca=t(ba.prototype,"scaleMax",[fa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=t(ba.prototype,"scaleMin",[ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ba=t(ba.prototype,"isChild",[ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),va=ba));l._RF.pop(),l._RF.push({},"90faepncc5I9Krc1g/FBUFw","sceneSwitcher",void 0);var _a,za,Aa,qa,Pa,Ea=u.ccclass,Da=u.property;La=Ea("SceneSwitcher"),Ua=Da({type:String}),Ia=Da({type:Boolean}),La((Na=t((Ma=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"sceneName",Na,i(e)),n(e,"isStolen",Fa,i(e)),e}return e(r,t),r.prototype.switchScene=function(){var e=this,t=Oe.getInstance();if(this.sceneName){if("main"!==this.sceneName)Ct.getInstance().resetAllSchedule(),t.isStolen=!1;"main"===this.sceneName&&(t.isStolen=this.isStolen,t.isStolen&&(t.stolenId=this.node.userId)),h.loadScene(this.sceneName,(function(n){if(n)console.error("Failed to load scene:",e.sceneName,n);else{if(console.log("Scene loaded:",e.sceneName),e.isStolen){var i=qi.getInstance();t.isStolenUISwitch(),i.requestFriendInfo()}e.isStolen||"main"!==e.sceneName||t.isNotStolenUISwitch()}}))}else console.warn("Scene name is empty!")},r}(d)).prototype,"sceneName",[Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Fa=t(Ma.prototype,"isStolen",[Ia],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xa=Ma));l._RF.pop(),l._RF.push({},"56054Qs82dJ4rzpVbAdeMkr","showTelegramInfo",void 0);var Oa,Ha,Wa,Ya,Xa,Ga,Va,ja,Ja=u.ccclass,Za=u.property;_a=Ja("ShowTelegramInfo"),za=Za(y),_a((Pa=t((qa=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"label",Pa,i(e)),e}return e(r,t),r.prototype.start=function(){},r}(d)).prototype,"label",[za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Aa=qa));l._RF.pop(),l._RF.push({},"311f2KSDWRM/riI5oXCisWs","switchButton",void 0);var Ka,Qa,$a,eo,to,no=u.ccclass,io=u.property;Oa=no("SwitchButton"),Ha=io(C),Wa=io(C),Oa((Ga=t((Xa=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"slider",Ga,i(e)),n(e,"background",Va,i(e)),n(e,"isOn",ja,i(e)),e}e(r,t);var a=r.prototype;return a.onLoad=function(){this.node.on(C.EventType.TOUCH_END,this.toggleSwitch,this),this.init()},a.toggleSwitch=function(e){this.isOn=!this.isOn,this.init()},a.init=function(){var e=this.background.getComponent("DrawRoundedRect");this.isOn?(this.slider.setPosition(new w(13,3,0)),e.fillColor=new z(159,180,106),this.slider.getChildByName("Label").getComponent(y).string="ON"):(this.slider.setPosition(new w(-54,3,0)),e.fillColor=new z(221,221,221),this.slider.getChildByName("Label").getComponent(y).string="OFF"),e.onLoad()},r}(d)).prototype,"slider",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Va=t(Xa.prototype,"background",[Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ja=t(Xa.prototype,"isOn",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ya=Xa));l._RF.pop(),l._RF.push({},"502c4BwQ4lNh6Dh7Vv/7Eo4","telegram",void 0);var ro,ao,oo=u.ccclass,so=u.property;Ka=oo("Telegram"),Qa=so(I),Ka((to=t((eo=function(t){function o(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(e,"tgInitData",to,i(e)),e}e(o,t);var s=o.prototype;return s.start=function(){},s.loadTelegramSDK=function(){return new Promise((function(e,t){if(window.Telegram&&window.Telegram.WebApp)return window.Telegram.WebApp.ready(),void e();var n=document.createElement("script");n.src="https://telegram.org/js/telegram-web-app.js",n.onload=function(){window.Telegram.WebApp.ready(),e()},n.onerror=function(e){t(e)},document.head.appendChild(n)}))},s.processInitData=function(){var e,t=null==(e=window.Telegram)||null==(e=e.WebApp)?void 0:e.initData;if(t){for(var n,i=new URLSearchParams(t),r={},a=c(i.entries());!(n=a()).done;){var o=n.value,s=o[0],l=o[1];r[s]=l}window.Telegram.WebApp.initDataUnsafe;window.Telegram.WebApp.onEvent("resize",(function(){})),this.tgInitData=t}},s.initTelegram=function(){var e=r(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadTelegramSDK();case 3:this.processInitData(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),o}(d)).prototype,"tgInitData",[Qa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$a=eo));l._RF.pop(),l._RF.push({},"1cceaumaSlMwZyKP7yKNFvI","timer",void 0);var co=u.ccclass;u.property,co("timer")(((ao=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.start=function(){n.isStart&&this.schedule((function(){n.time<=0?(this.node.getComponent(y).string="",this.node.parent.active=!1):n.time>0&&(this.node.getComponent(y).string="倒计时："+n.time+"秒"),n.time--}),1)},i.update=function(e){},n}(d)).time=30,ao.isStart=!1,ro=ao));l._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});